import { NextRequest, NextResponse } from "next/server";

// POST /api/ai/scaffold-document - Generate document structure using AI
export async function POST(request: NextRequest) {
    try {
        const body = await request.json();
        const { roleKeyword, documentType } = body;

        if (!roleKeyword || !documentType) {
            return NextResponse.json(
                { error: "Missing required fields: roleKeyword, documentType" },
                { status: 400 }
            );
        }

        // Generate structured scaffold based on document type
        const scaffold = generateScaffold(roleKeyword, documentType);

        return NextResponse.json({
            success: true,
            scaffold,
            message: "Scaffold generated. Fill in the sections with your specific content."
        });
    } catch (error) {
        console.error("Error generating document scaffold:", error);
        return NextResponse.json(
            { error: "Failed to generate scaffold" },
            { status: 500 }
        );
    }
}

function generateScaffold(roleKeyword: string, documentType: string): string {
    const scaffolds: Record<string, string> = {
        JOB_DESCRIPTION: `# ${roleKeyword}

## üìå –ú—ñ—Å—ñ—è —Ä–æ–ª—ñ
<!-- –û–ø–∏—à—ñ—Ç—å –≤ 1-2 —Ä–µ—á–µ–Ω–Ω—è—Ö –≥–æ–ª–æ–≤–Ω—É –º–µ—Ç—É —Ü—ñ—î—ó —Ä–æ–ª—ñ -->

## üéØ –ö–ª—é—á–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ (3-5)
- [ ] <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç 1 -->
- [ ] <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç 2 -->
- [ ] <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç 3 -->

## üìã –©–æ–¥–µ–Ω–Ω—ñ —Ä–∏—Ç—É–∞–ª–∏
- **–†–∞–Ω–æ–∫**: <!-- –©–æ —Ä–æ–±–∏—Ç–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É –¥–Ω—è -->
- **–ü—Ä–æ—Ç—è–≥–æ–º –¥–Ω—è**: <!-- –û—Å–Ω–æ–≤–Ω—ñ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ -->
- **–í–µ—á—ñ—Ä**: <!-- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–Ω—è, –∑–≤—ñ—Ç–Ω—ñ—Å—Ç—å -->

## üìû –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏
### –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ 1
<!-- –û–ø–∏—à—ñ—Ç—å –∫—Ä–æ–∫–∏ -->

### –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ 2
<!-- –û–ø–∏—à—ñ—Ç—å –∫—Ä–æ–∫–∏ -->

## üìä –ö–ª—é—á–æ–≤—ñ KPI
| KPI | –¶—ñ–ª—å | –ß–∞—Å—Ç–æ—Ç–∞ |
|-----|------|---------|
| <!-- KPI 1 --> | <!-- –ó–Ω–∞—á–µ–Ω–Ω—è --> | <!-- –î–µ–Ω—å/–¢–∏–∂–¥–µ–Ω—å/–ú—ñ—Å—è—Ü—å --> |
| <!-- KPI 2 --> | <!-- –ó–Ω–∞—á–µ–Ω–Ω—è --> | <!-- –î–µ–Ω—å/–¢–∏–∂–¥–µ–Ω—å/–ú—ñ—Å—è—Ü—å --> |

## ‚ö†Ô∏è –ß–æ–≥–æ —É–Ω–∏–∫–∞—Ç–∏
- <!-- –ê–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω 1 -->
- <!-- –ê–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω 2 -->
`,
        SOP: `# SOP: ${roleKeyword}

## üìã –û–≥–ª—è–¥
**–ú–µ—Ç–∞**: <!-- –î–ª—è —á–æ–≥–æ —Ü—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ -->
**–û–±–ª–∞—Å—Ç—å**: <!-- –ö–æ–ª–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è -->
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π**: <!-- –•—Ç–æ –≤–∏–∫–æ–Ω—É—î -->

## ‚úÖ –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- [ ] <!-- –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º -->

## üìù –ö—Ä–æ–∫–∏
### –ö—Ä–æ–∫ 1: <!-- –ù–∞–∑–≤–∞ -->
<!-- –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å -->

### –ö—Ä–æ–∫ 2: <!-- –ù–∞–∑–≤–∞ -->
<!-- –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å -->

### –ö—Ä–æ–∫ 3: <!-- –ù–∞–∑–≤–∞ -->
<!-- –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å -->

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ
<!-- –ö—Ä–∏—Ç–∏—á–Ω—ñ –º–æ–º–µ–Ω—Ç–∏, –Ω–∞ —è–∫—ñ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É -->

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ –¥–ª—è –µ—Å–∫–∞–ª–∞—Ü—ñ—ó
- <!-- –ö–æ–Ω—Ç–∞–∫—Ç 1 -->
`,
        POLICY: `# –ü–æ–ª—ñ—Ç–∏–∫–∞: ${roleKeyword}

## üìã –ó–∞–≥–∞–ª—å–Ω—ñ –ø–æ–ª–æ–∂–µ–Ω–Ω—è
**–î–∞—Ç–∞ —á–∏–Ω–Ω–æ—Å—Ç—ñ**: <!-- –î–∞—Ç–∞ -->
**–í–µ—Ä—Å—ñ—è**: 1.0
**–ó–∞—Ç–≤–µ—Ä–¥–∏–≤**: <!-- –ü–Ü–ë -->

## üéØ –ú–µ—Ç–∞
<!-- –î–ª—è —á–æ–≥–æ —Ü—è –ø–æ–ª—ñ—Ç–∏–∫–∞ -->

## üìñ –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞
### 1. <!-- –ü—Ä–∞–≤–∏–ª–æ -->
<!-- –û–ø–∏—Å -->

### 2. <!-- –ü—Ä–∞–≤–∏–ª–æ -->
<!-- –û–ø–∏—Å -->

## ‚ö†Ô∏è –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å
<!-- –©–æ –±—É–¥–µ –∑–∞ –ø–æ—Ä—É—à–µ–Ω–Ω—è -->

## üìù –í–∏–∫–ª—é—á–µ–Ω–Ω—è
<!-- –ö–æ–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è -->
`,
        KPI_GUIDE: `# KPI: ${roleKeyword}

## üìä –û–ø–∏—Å –º–µ—Ç—Ä–∏–∫–∏
**–ù–∞–∑–≤–∞**: ${roleKeyword}
**–û–¥–∏–Ω–∏—Ü—è –≤–∏–º—ñ—Ä—É**: <!-- —à—Ç, %, –≥—Ä–Ω -->
**–ù–∞–ø—Ä—è–º–æ–∫**: <!-- –ë—ñ–ª—å—à–µ –∫—Ä–∞—â–µ / –ú–µ–Ω—à–µ –∫—Ä–∞—â–µ / –¶—ñ–ª—å–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è -->

## üìà –¶—ñ–ª—å–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
| –†—ñ–≤–µ–Ω—å | –ó–Ω–∞—á–µ–Ω–Ω—è | –ö–æ–ª—ñ—Ä |
|--------|----------|-------|
| –í—ñ–¥–º—ñ–Ω–Ω–æ | <!-- >= X --> | üü¢ |
| –î–æ–±—Ä–µ | <!-- >= Y --> | üü° |
| –ü–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏ | <!-- < Y --> | üî¥ |

## üîç –î–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö
<!-- CRM / Manual / Daily Reports -->

## üìê –§–æ—Ä–º—É–ª–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É
\`\`\`
<!-- –§–æ—Ä–º—É–ª–∞ -->
\`\`\`

## üìÖ –ß–∞—Å—Ç–æ—Ç–∞ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è
<!-- –©–æ–¥–Ω—è / –©–æ—Ç–∏–∂–Ω—è / –©–æ–º—ñ—Å—è—Ü—è -->
`,
        ONBOARDING: `# –û–Ω–±–æ—Ä–¥–∏–Ω–≥: ${roleKeyword}

## üëã –í—ñ—Ç–∞—î–º–æ –≤ –∫–æ–º–∞–Ω–¥—ñ!

## üìÖ –î–µ–Ω—å 1
- [ ] <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->
- [ ] <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->

## üìÖ –¢–∏–∂–¥–µ–Ω—å 1
- [ ] <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->
- [ ] <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->

## üìÖ –ú—ñ—Å—è—Ü—å 1
- [ ] <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->
- [ ] <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->

## üìö –û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—è
- [ ] <!-- –î–æ–∫—É–º–µ–Ω—Ç 1 -->
- [ ] <!-- –î–æ–∫—É–º–µ–Ω—Ç 2 -->

## üë• –ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏
| –†–æ–ª—å | –ü–Ü–ë | –ö–æ–Ω—Ç–∞–∫—Ç |
|------|-----|---------|
| <!-- –ö–µ—Ä—ñ–≤–Ω–∏–∫ --> | <!-- --> | <!-- --> |
| <!-- HR --> | <!-- --> | <!-- --> |
`,
        OTHER: `# ${roleKeyword}

## üìã –û–≥–ª—è–¥
<!-- –û–ø–∏—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->

## üìù –û—Å–Ω–æ–≤–Ω–∏–π –∑–º—ñ—Å—Ç
### –†–æ–∑–¥—ñ–ª 1
<!-- –í–º—ñ—Å—Ç -->

### –†–æ–∑–¥—ñ–ª 2
<!-- –í–º—ñ—Å—Ç -->

## üìé –î–æ–¥–∞—Ç–∫–∏
<!-- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ -->
`,
    };

    return scaffolds[documentType] || scaffolds.OTHER;
}
